/* ==========================================================================
   site-modern.css — authoritative stylesheet for the site
   Put in: wwwroot/css/site-modern.css
   Includes:
     - animated glossy gradient
     - full theme overrides (original / light / dark)
     - glassmorphism panels & topbar
     - fixed progress-ring scoping (no corner ring)
     - styled mode buttons (Pomodoro/Short/Long)
     - FAQ contrast + theme-aware
     - parallax helper styles
     - hover animations on primary controls
   ========================================================================== */

/* --------------------------------------------------------------------------
   Base gradient variables & animated glossy background
   -------------------------------------------------------------------------- */
:root {
    --bg-1: #d9c9ff;
    --bg-2: #a18cd1;
    --bg-3: #7b2cff;
    --bg-4: #3f2b96;
    --bg-speed: 22s;
    --bg-ease: cubic-bezier(.2,.7,.2,1);
    /* panels / glass */
    --panel-bg: rgba(255,255,255,0.06);
    --panel-border: rgba(255,255,255,0.12);
    --panel-shadow: 0 18px 40px rgba(7,6,18,0.36);
    --accent1: #7b2cff;
    --accent2: #a18cd1;
    --text-color: #f5f1ff;
    --muted-color: rgba(245,241,255,0.75);
    --slider-start: #6b4fff;
    --slider-end: #d86aff;
}

html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    color: var(--text-color);
    background: linear-gradient( 120deg, var(--bg-1) 0%, var(--bg-2) 30%, var(--bg-3) 65%, var(--bg-4) 100% );
    background-size: 240% 240%;
    background-attachment: fixed;
    animation: gradientFlow var(--bg-speed) var(--bg-ease) infinite alternate;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

@keyframes gradientFlow {
    0% {
        background-position: 10% 50%;
    }

    50% {
        background-position: 50% 50%;
    }

    100% {
        background-position: 90% 50%;
    }
}

@media (prefers-reduced-motion: reduce) {
    html, body {
        animation: none !important;
        background-size: cover !important;
        background-attachment: scroll !important;
    }
}

/* --------------------------------------------------------------------------
   Theme overrides (affect ALL gradient stops and panel variables)
   -------------------------------------------------------------------------- */
/* Original purple (default) */
body.theme-original {
    --bg-1: #d9c9ff;
    --bg-2: #a18cd1;
    --bg-3: #7b2cff;
    --bg-4: #3f2b96;
    --panel-bg: rgba(255,255,255,0.06);
    --panel-border: rgba(255,255,255,0.12);
    --panel-shadow: 0 18px 40px rgba(7,6,18,0.36);
    --accent1: #7b2cff;
    --accent2: #a18cd1;
    --text-color: #f5f1ff;
    --muted-color: rgba(245,241,255,0.75);
    --slider-start: #6b4fff;
    --slider-end: #d86aff;
}

/* Light: white/light lavender overlay that consumes whole UI */
body.theme-light {
    --bg-1: #ffffff;
    --bg-2: #f6f4ff;
    --bg-3: #efeaff;
    --bg-4: #efeefc;
    --panel-bg: rgba(255,255,255,0.98);
    --panel-border: rgba(0,0,0,0.06);
    --panel-shadow: 0 14px 36px rgba(18,18,20,0.06);
    --accent1: #7a5bff;
    --accent2: #b48cff;
    --text-color: #111;
    --muted-color: rgba(34,34,34,0.6);
    --slider-start: #8b6bff;
    --slider-end: #d0afff;
}

/* Dark: black/dark overlay consuming whole UI */
body.theme-dark {
    --bg-1: #050005;
    --bg-2: #120012;
    --bg-3: #2a001d;
    --bg-4: #0f0010;
    --panel-bg: rgba(8,8,10,0.86);
    --panel-border: rgba(255,255,255,0.04);
    --panel-shadow: 0 18px 60px rgba(0,0,0,0.6);
    --accent1: #5d2a6a;
    --accent2: #2b004f;
    --text-color: #efe6ff;
    --muted-color: rgba(255,230,255,0.5);
    --slider-start: #4f2a5f;
    --slider-end: #6c3f80;
}

/* --------------------------------------------------------------------------
   Layout grid
   -------------------------------------------------------------------------- */
.container.main-grid {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: 28px;
    padding: 36px 18px;
    align-items: start;
}

@media (max-width: 900px) {
    .container.main-grid {
        grid-template-columns: 1fr;
        padding: 20px;
        gap: 16px;
    }
}

/* --------------------------------------------------------------------------
   Glassmorphic panels / cards
   -------------------------------------------------------------------------- */
.panel, .side-panel, .timer-panel, .card {
    background: var(--panel-bg) !important;
    border: 1px solid var(--panel-border) !important;
    color: var(--text-color) !important;
    box-shadow: var(--panel-shadow) !important;
    border-radius: 14px !important;
    padding: 20px !important;
    backdrop-filter: blur(14px) saturate(160%) !important;
    -webkit-backdrop-filter: blur(14px) saturate(160%) !important;
    transition: transform 260ms ease, box-shadow 260ms ease, background 260ms ease;
}

    .panel:hover, .side-panel:hover, .timer-panel:hover {
        transform: translateY(-6px);
        box-shadow: 0 28px 70px rgba(0,0,0,0.22), 0 0 36px rgba(123,44,255,0.09);
    }

/* Prevent parallax bleeding: isolate each panel into its own layer */
.panel, .side-panel, .timer-panel, .card,
.content-sections .panel,
#bigFaqAccordion .accordion-item {
    isolation: isolate;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform-style: preserve-3d;
    will-change: transform;
    overflow: visible; /* prevents parallax from clipping content */
}

/* give a minimum spacing and breathing room to panels so parallax doesn't collide */
.content-sections .panel,
#bigFaqAccordion .accordion-item,
.timer-panel,
.side-panel,
.panel {
    margin-bottom: 40px;
    padding: 22px !important;
    min-height: 110px;
}

/* Topbar glass */
.topbar {
    position: sticky;
    top: 0;
    width: 100%;
    z-index: 1200;
    padding: 14px 24px;
    border-radius: 0 0 16px 16px;
    background: var(--panel-bg) !important;
    border-bottom: 1px solid var(--panel-border);
    box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    backdrop-filter: blur(16px) saturate(160%);
    -webkit-backdrop-filter: blur(16px) saturate(160%);
    transition: background 240ms ease, box-shadow 240ms ease, transform 240ms ease;
}

    .topbar:hover {
        box-shadow: 0 10px 32px rgba(0,0,0,0.16), 0 0 28px rgba(123,44,255,0.06);
    }

    .topbar .brand {
        color: var(--text-color) !important;
        font-weight: 700;
        font-size: 1.12rem;
        letter-spacing: -0.2px;
    }

/* Ghost button consistent with glass */
.btn-ghost {
    background: rgba(255,255,255,0.04) !important;
    border: 1px solid rgba(255,255,255,0.06) !important;
    color: var(--text-color) !important;
    padding: 6px 10px !important;
    border-radius: 10px !important;
    box-shadow: 0 6px 14px rgba(6,18,40,0.10) !important;
}

/* --------------------------------------------------------------------------
   Timer area + ring fixes (no corner ring)
   -------------------------------------------------------------------------- */
.timer-panel {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    min-height: 520px;
    position: relative;
    z-index: 2;
}

.muted-title {
    color: var(--text-color);
    font-weight: 700;
    font-size: 1.25rem;
    margin: 4px 0;
}

/* Hide any .progress-ring not inside the official timer container
   (fixes the rogue circle in the corner) */
.progress-ring {
    display: none !important;
}

.timer-wrap > .progress-ring,
.timer-panel .progress-ring {
    display: block !important;
    position: absolute !important;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    margin: auto !important;
    width: 100% !important;
    height: 100% !important;
    transform: rotate(-90deg) !important;
    z-index: 1;
}

/* timer visuals */
.timer-wrap {
    position: relative;
    width: 340px;
    height: 340px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 6px;
}

.ring-bg {
    stroke: rgba(255,255,255,0.06);
    stroke-width: 6;
    fill: none;
    opacity: 0.6;
}

.ring {
    stroke: var(--accent1);
    stroke-width: 6;
    stroke-linecap: round;
    fill: none;
    transition: stroke-dashoffset .4s linear;
}

/* inner frosted circle */
.timer-display {
    width: 240px;
    height: 240px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.01));
    border: 1px solid rgba(255,255,255,0.10);
    box-shadow: inset 0 6px 18px rgba(3,9,22,0.10), 0 8px 40px rgba(7,6,18,0.25);
    backdrop-filter: blur(12px) saturate(140%);
}

.time-large {
    font-size: 3.4rem;
    font-weight: 700;
    color: var(--text-color);
    letter-spacing: -1px;
}

.session-label {
    color: var(--muted-color);
    margin-top: 8px;
    font-weight: 600;
}

/* Hide quick-start compact variants (user requested) */
.hero-timer, .timer-wrap-compact, #timeDisplayHero {
    display: none !important;
}

/* --------------------------------------------------------------------------
   Styled Pomodoro / Short / Long buttons (mode tabs)
   -------------------------------------------------------------------------- */
.mode-tabs {
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: center;
}

.mode-btn {
    background: transparent !important;
    border-radius: 999px !important;
    padding: 8px 16px !important;
    border: 1px solid rgba(255,255,255,0.06) !important;
    color: var(--text-color) !important;
    font-weight: 700 !important;
    letter-spacing: 0.2px;
    cursor: pointer;
    transition: transform 140ms ease, background 160ms ease, color 160ms ease, box-shadow 160ms ease;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}

    .mode-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 12px 28px rgba(0,0,0,0.16);
    }

    .mode-btn.active {
        background: linear-gradient(90deg, var(--accent2), var(--accent1)) !important;
        color: #fff !important;
        box-shadow: 0 16px 44px rgba(123,44,255,0.22) !important;
    }

    /* small/compact variant (if used elsewhere) */
    .mode-btn.small {
        padding: 6px 10px !important;
        font-size: 0.95rem;
    }

/* --------------------------------------------------------------------------
   Timer action buttons
   -------------------------------------------------------------------------- */
.timer-actions {
    margin-top: 14px;
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: center;
}

.btn-primary {
    background: linear-gradient(90deg,var(--accent2), var(--accent1)) !important;
    border: none !important;
    color: #fff !important;
    border-radius: 12px !important;
    padding: 10px 22px !important;
    font-weight: 700 !important;
    box-shadow: 0 12px 28px rgba(123,44,255,0.18);
    transition: transform 160ms cubic-bezier(.2,.9,.3,1), box-shadow 160ms ease, filter 160ms ease;
}

    .btn-primary:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 22px 54px rgba(123,44,255,0.26);
        filter: saturate(1.05);
    }

.btn-outline-secondary {
    background: rgba(255,255,255,0.02) !important;
    border: 1px solid rgba(255,255,255,0.04) !important;
    color: var(--text-color) !important;
}

/* chip buttons */
.btn-chip {
    border-radius: 999px !important;
    background: rgba(255,255,255,0.02) !important;
    color: var(--text-color) !important;
    border: 1px solid rgba(255,255,255,0.04);
    padding: 6px 10px !important;
}

/* --------------------------------------------------------------------------
   Side panel: tasks + player
   -------------------------------------------------------------------------- */
.side-panel {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 18px !important;
}

.tasks-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* space out each child in the side panel so things don't visually collide */
.side-panel > * {
    margin-bottom: 14px;
}

.task-input {
    display: flex;
    gap: 8px;
    align-items: center;
}

.side-panel .form-control {
    background: rgba(255,255,255,0.02) !important;
    border: 1px solid rgba(255,255,255,0.04) !important;
    color: var(--text-color) !important;
    border-radius: 10px !important;
    padding: 8px 12px !important;
}

/* task list */
.task-list {
    list-style: none;
    padding: 0;
    margin: 0;
    overflow: auto;
    max-height: 260px;
}

.task-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.008));
    border: 1px solid rgba(255,255,255,0.03);
    padding: 10px;
    border-radius: 10px;
    color: var(--text-color);
}

/* --------------------------------------------------------------------------
   Spotify-like player (centered controls + bottom volume/loop row)
   -------------------------------------------------------------------------- */
/* Prevent music player from bleeding into other sections */
.player-card {
    margin-top: 20px;
    margin-bottom: 20px;
    isolation: isolate;
    padding: 20px;
}

.player-left {
    display: flex;
    gap: 12px;
    align-items: center;
    min-width: 180px;
}

.album-art {
    width: 64px;
    height: 64px;
    border-radius: 8px;
    overflow: hidden;
    background: linear-gradient(135deg, rgba(10,10,16,0.3), rgba(255,255,255,0.02));
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 8px 26px rgba(0,0,0,0.24);
}

.track-meta {
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.track-title {
    font-weight: 600;
    color: var(--text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
}

.track-sub {
    color: var(--muted-color);
    font-size: 0.92rem;
}

/* center column */
.player-center {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 10px;
    align-items: center;
}

.progress-wrap {
    width: 100%;
    display: flex;
    flex-direction: column;
    gap: 6px;
    align-items: center;
}

.progress-range {
    -webkit-appearance: none;
    width: 95%;
    height: 8px;
    border-radius: 6px;
    background: linear-gradient(90deg, var(--slider-start), var(--slider-end));
    outline: none;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
}

    .progress-range::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background: #fff;
        box-shadow: 0 2px 8px rgba(0,0,0,0.25);
        border: 2px solid rgba(255,255,255,0.06);
    }

.controls {
    display: flex;
    gap: 18px;
    align-items: center;
    justify-content: center;
}

.ctrl {
    background: transparent;
    border: none;
    color: var(--text-color);
    font-size: 18px;
    width: 40px;
    height: 40px;
    border-radius: 999px;
    display: grid;
    place-items: center;
    cursor: pointer;
    transition: transform 120ms ease, background 120ms ease, box-shadow 120ms ease;
}

    .ctrl:hover {
        transform: translateY(-4px);
        color: #fff;
        box-shadow: 0 8px 20px rgba(0,0,0,0.16);
    }

    .ctrl.play {
        background: linear-gradient(90deg, var(--accent2), var(--accent1));
        color: #fff;
        width: 46px;
        height: 46px;
        box-shadow: 0 12px 28px rgba(123,44,255,0.18);
    }

/* bottom controls */
.center-bottom-controls {
    display: flex;
    gap: 12px;
    align-items: center;
    justify-content: center;
    width: 100%;
    margin-top: 6px;
}

.vol-control {
    display: flex;
    gap: 8px;
    align-items: center;
    background: rgba(255,255,255,0.02);
    padding: 6px 10px;
    border-radius: 999px;
}

    .vol-control input[type=range] {
        width: 120px;
        -webkit-appearance: none;
        height: 6px;
        border-radius: 6px;
        background: linear-gradient(90deg, var(--slider-start), var(--slider-end));
    }

/* responsive */
@media (max-width: 900px) {
    .player-card {
        flex-direction: column;
        align-items: stretch;
        padding: 12px;
    }

    .player-left {
        min-width: unset;
    }

    .player-center {
        align-items: stretch;
    }

    .progress-range {
        width: 100%;
    }

    .vol-control input[type=range] {
        width: 100px;
    }
}

/* --------------------------------------------------------------------------
   Content sections + FAQ (contrast + theme-aware)
   -------------------------------------------------------------------------- */
.content-sections {
    margin-top: 64px;
    margin-bottom: 64px;
    color: var(--text-color);
}

    .content-sections .section-title {
        font-size: 1.9rem;
        font-weight: 700;
        margin-bottom: 18px;
        text-align: center;
        color: var(--text-color);
    }

/* Make FAQ wrapper use panel variables so themes affect it */
#bigFaqAccordion {
    border-radius: 12px;
    overflow: hidden;
    background: var(--panel-bg);
    border: 1px solid var(--panel-border);
    box-shadow: var(--panel-shadow);
    padding: 18px;
    margin-bottom: 40px; /* extra space below FAQ block */
}

    /* Each accordion item gets contrast and clear text color */
    #bigFaqAccordion .accordion-item {
        background: transparent;
        border: none;
        margin-bottom: 14px;
        border-radius: 10px;
        overflow: hidden; /* keeps the rounded shape when revealed */
    }

    #bigFaqAccordion .accordion-button {
        background: rgba(255,255,255,0.02);
        color: var(--text-color);
        font-weight: 700;
        padding: 14px 18px;
        border-radius: 8px;
        margin-bottom: 8px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.08);
        transition: background 180ms ease, transform 160ms ease;
    }

        #bigFaqAccordion .accordion-button:hover {
            background: rgba(255,255,255,0.04);
            transform: translateY(-2px);
        }

        /* chevron (arrow) color */
        #bigFaqAccordion .accordion-button::after {
            filter: none;
            color: var(--text-color);
            opacity: 0.95;
        }

    /* panel body */
    #bigFaqAccordion .accordion-body {
        color: var(--muted-color);
        background: transparent;
        padding: 16px 20px; /* increased padding so content doesn't touch edges */
    }

    /* FAQ empty/placeholder */
    #bigFaqAccordion .accordion-item .accordion-body p {
        margin: 0;
    }

/* --------------------------------------------------------------------------
   Parallax helper styles
   JS should set transformY based on data-parallax-speed; styles ensure smooth render
   -------------------------------------------------------------------------- */
[data-parallax-speed] {
    will-change: transform;
    transition: transform 420ms cubic-bezier(.2,.9,.3,1);
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* Add a subtle extra offset for large screens (so parallax feels stronger) */
@media (min-width: 992px) {
    [data-parallax-speed].strong {
        transition-duration: 520ms;
    }
}

/* --------------------------------------------------------------------------
   Scroll reveal animation (buttery)
   -------------------------------------------------------------------------- */
.animate-on-scroll {
    opacity: 0;
    transform: translateY(30px) scale(.995);
    transition: opacity 720ms cubic-bezier(.16,.84,.36,1), transform 720ms cubic-bezier(.16,.84,.36,1);
    will-change: transform, opacity;
}

    .animate-on-scroll.in-view {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

/* reduced motion */
@media (prefers-reduced-motion: reduce) {
    .animate-on-scroll, .animate-on-scroll.in-view {
        transition: none !important;
        transform: none !important;
        opacity: 1 !important;
    }
}

/* --------------------------------------------------------------------------
   Modals
   -------------------------------------------------------------------------- */
.modal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(5,10,20,0.45);
    z-index: 2000;
}

    .modal .modal-dialog {
        max-width: 920px;
    }

#historyModal .modal-content {
    max-height: 75vh;
    overflow: auto;
}

/* --------------------------------------------------------------------------
   Small helpers and responsive tweaks
   -------------------------------------------------------------------------- */
.small-muted {
    color: var(--muted-color);
}

.text-muted {
    color: var(--muted-color) !important;
}

/* ensure ring shows up on top for the real timer */
.timer-wrap .progress-ring {
    z-index: 1;
}

/* ensure panels appear above background */
html body .panel, html body .side-panel, html body .timer-panel {
    z-index: 2;
}

/* --------------------------------------------------------------------------
   Accessibility: reduce hover movement if reduced-motion
   -------------------------------------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
    .panel:hover, .btn-primary:hover, .ctrl:hover, .mode-btn:hover {
        transform: none !important;
        box-shadow: none !important;
    }
}

/* --------------------------------------------------------------------------
   Final small adjustments for neatness: avoid bleeding from adjacent cards
   -------------------------------------------------------------------------- */
/* ensure a larger gutter between left and right columns on wide screens */
@media (min-width: 1100px) {
    .container.main-grid {
        gap: 40px;
    }
}

/* ensure stacked content inside content-sections doesn't touch each other */
.content-sections .panel + .panel,
.content-sections .panel + .card,
#bigFaqAccordion + .panel {
    margin-top: 18px;
}

/* final responsive tweaks */
@media (max-width: 900px) {
    .content-sections {
        margin-top: 32px;
        margin-bottom: 32px;
    }

    .panel, .side-panel, .timer-panel {
        padding: 18px !important;
    }

    .player-card {
        padding: 12px;
    }
}

/* --------------------------------------------------------------------------
   End of file
   -------------------------------------------------------------------------- */


/* End of file */


